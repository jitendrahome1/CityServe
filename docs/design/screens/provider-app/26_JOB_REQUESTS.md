# Job Requests

## Overview
- **Screen ID**: 26
- **Screen Name**: Job Requests (All Pending Jobs)
- **User Flow**: View all available job requests to accept or decline
- **Navigation**: From Dashboard "View All", Bottom Tab "Jobs"

## ASCII Wireframe

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Job Requests        [Filter] [Sort] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   All (5)â”‚ â”‚ Today (3)â”‚ â”‚ Urgent  â”‚ â”‚ â† Filter Tabs
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚   (selected)                             â”‚
â”‚                                          â”‚
â”‚  ğŸ”§ AC Repair & Service                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ Koramangala â€¢ 3.2 km            â”‚ â”‚
â”‚  â”‚ ğŸ“… Today â€¢ 2:00 PM - 3:30 PM       â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ Amit Kumar â€¢ â­ 4.5             â”‚ â”‚
â”‚  â”‚ ğŸ’° â‚¹650                            â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ â° Respond in 8 minutes            â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ [Decline]  [Accept]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  ğŸ’¡ Electrical Work                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ Indiranagar â€¢ 5.8 km            â”‚ â”‚
â”‚  â”‚ ğŸ“… Tomorrow â€¢ 10:00 AM             â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ Priya Sharma â€¢ â­ 4.8           â”‚ â”‚
â”‚  â”‚ ğŸ’° â‚¹450                            â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ â° Respond in 12 minutes           â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ [Decline]  [Accept]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  ğŸ”§ AC Installation                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ HSR Layout â€¢ 7.1 km             â”‚ â”‚
â”‚  â”‚ ğŸ“… Dec 25 â€¢ 11:00 AM               â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ Rahul Singh â€¢ â­ New Customer   â”‚ â”‚
â”‚  â”‚ ğŸ’° â‚¹1,200                          â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ â° Respond in 25 minutes           â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ [Decline]  [Accept]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ    ğŸ’¼   ğŸ’°   ğŸ‘¤                       â”‚ â† Bottom Tab
â”‚ Home  Jobs Earnings Profile             â”‚
â”‚      (selected)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Features

### Filter Tabs
- **All**: All available requests
- **Today**: Jobs scheduled for today
- **Urgent**: Expiring soon (< 10 min)
- **Nearby**: Within 5km

### Sorting Options
- **Time** (default): By job scheduled time
- **Distance**: Nearest first
- **Price**: Highest first
- **Expiry**: Expiring soon first

### Job Card Elements
- Service icon and name
- Location with distance
- Date and time
- Customer name and rating
- Job amount
- Countdown timer (auto-updates)
- Accept/Decline buttons

## Interactions

### Accept Job
- Confirmation alert
- Add to active jobs
- Remove from requests
- Notify customer
- Success haptic + toast

### Decline Job
- Show decline reason sheet
- Log reason for analytics
- Remove from list
- Offer to next provider

### Filter Tap
- Switch filter category
- Cross-fade content
- Update count badge

### Sort Button
- Show sort options sheet
- Apply sorting
- Persist preference

### Pull to Refresh
- Reload available jobs
- Update countdown timers

## Real-time Updates
- Auto-refresh every 30 seconds
- Remove expired jobs
- Add new requests
- Update countdown timers

## Empty States
- **No Jobs**: "No job requests available. We'll notify you when jobs arrive."
- **Filtered**: "No jobs match your filter"

## SwiftUI Implementation (Condensed)

```swift
struct JobRequestsView: View {
    @StateObject private var viewModel = JobRequestsViewModel()
    @State private var selectedFilter: JobFilter = .all

    var body: some View {
        VStack {
            // Filter Tabs
            ScrollView(.horizontal) {
                HStack {
                    ForEach(JobFilter.allCases, id: \.self) { filter in
                        FilterTab(
                            title: filter.title,
                            count: viewModel.jobCount(for: filter),
                            isSelected: selectedFilter == filter,
                            onTap: { selectedFilter = filter }
                        )
                    }
                }
            }

            // Job List
            if filteredJobs.isEmpty {
                EmptyJobsView()
            } else {
                List(filteredJobs) { job in
                    JobRequestCard(
                        job: job,
                        onAccept: { acceptJob(job) },
                        onDecline: { declineJob(job) }
                    )
                }
            }
        }
        .onAppear { loadJobs() }
        .refreshable { await viewModel.refresh() }
    }

    var filteredJobs: [Job] {
        viewModel.filter(jobs: viewModel.jobs, by: selectedFilter)
    }
}
```

## Analytics
- `job_requests_viewed`: Screen loaded
- `job_filter_changed`: Filter switched
- `job_sorted`: Sort applied
- `job_accepted_from_list`: Quick accept
- `job_declined_from_list`: Quick decline
